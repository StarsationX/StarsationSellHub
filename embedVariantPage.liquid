<div class="flex flex-col-reverse md:flex-row gap-4 min-h-[calc(100svh-380px-70px-50px)] w-full">
  <div class="w-full flex flex-col gap-4">
    <div class="relative bg-accent/30 p-4 rounded-lg flex flex-col">
      <div class="absolute flex flex-col gap-2 top-4 right-4">
        {% if item.variant.warranty %}
        <div
          class="w-fit bg-green-500/20 text-green-500 rounded-lg px-3 py-2 text-xs flex items-center gap-2 font-medium">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-shield">
            <path
              d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z" />
          </svg>{{ item.variant.warranty.duration }} {{ item.variant.warranty.unit }} base warranty
        </div>
        {% endif %}
        {% if item.variant.stock %}
        <span
          class="text-xs text-right {% if item.variant.stock.count > 0 %} text-green-500 {% else %} text-red-500 {% endif %} ">
          Stock:
          {% if item.variant.stock.count > 999999999999 %}
          âˆž
          {% else %}
          {{ item.variant.stock.count }}
          {% endif %}
        </span>
        {% endif %}
      </div>
      <!-- Cart Products List -->
      <div class="flex flex-col gap-4">
        <!-- Product Image and Info -->
        <div class="w-full flex flex-row items-center gap-4">
          <fade-in-image alt="product image" src="{{ item.image | default: '/images/no_image_placeholder.png' }}"
            class="h-24 w-24 min-w-24 min-h-24 rounded-lg object-cover shrink-0">
          </fade-in-image>
          <div class="w-full flex flex-row gap-2">
            <!-- Product Info -->
            <div class="flex flex-col gap-4">
              <div class="flex flex-col">
                <div class="text-base sm:text-lg md:text-xl font-semibold line-clamp-1">{{ item.name }}</div>
                <div class="text-xs text-muted-foreground/70 line-clamp-1 w-full">{{ item.variant.name }}</div>
              </div>
              {% if item.averageRating > 0 %}
              <div class="flex flex-row items-center gap-2">
                <ul class="flex flex-row gap-1">
                  {% for i in (1..item.averageRating) %}
                  <li class="text-[--accent-color]">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path fill="currentColor"
                        d="m11.443 19.478-4.328 2.378c-.584.321-1.307.086-1.615-.524a1.3 1.3 0 0 1-.12-.793l.827-5.037a1.29 1.29 0 0 0-.344-1.106L2.36 10.83a1.29 1.29 0 0 1-.021-1.767c.183-.197.424-.325.684-.364l4.839-.735c.39-.06.726-.315.9-.684l2.165-4.582c.292-.619 1.009-.873 1.601-.568.236.122.427.321.543.568l2.164 4.582c.175.369.511.625.901.684l4.839.735c.654.099 1.106.733 1.011 1.416a1.27 1.27 0 0 1-.348.715l-3.502 3.567c-.282.287-.41.7-.344 1.106l.827 5.037c.112.68-.326 1.326-.977 1.443a1.15 1.15 0 0 1-.758-.126l-4.328-2.378a1.15 1.15 0 0 0-1.114 0" />
                    </svg>
                  </li>
                  {% endfor %}
                  {% for i in (item.averageRating..4) %}
                  <li class="text-muted-foreground/70">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path fill="currentColor"
                        d="m11.443 19.478-4.328 2.378c-.584.321-1.307.086-1.615-.524a1.3 1.3 0 0 1-.12-.793l.827-5.037a1.29 1.29 0 0 0-.344-1.106L2.36 10.83a1.29 1.29 0 0 1-.021-1.767c.183-.197.424-.325.684-.364l4.839-.735c.39-.06.726-.315.9-.684l2.165-4.582c.292-.619 1.009-.873 1.601-.568.236.122.427.321.543.568l2.164 4.582c.175.369.511.625.901.684l4.839.735c.654.099 1.106.733 1.011 1.416a1.27 1.27 0 0 1-.348.715l-3.502 3.567c-.282.287-.41.7-.344 1.106l.827 5.037c.112.68-.326 1.326-.977 1.443a1.15 1.15 0 0 1-.758-.126l-4.328-2.378a1.15 1.15 0 0 0-1.114 0" />
                    </svg>
                  </li>
                  {% endfor %}
                </ul>
              </div>
              {% endif %}
              <div class="flex flex-row items-center gap-2">
                <div class="text-lg font-semibold text-[--accent-color]">{{ item.variant.price }}</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Product Description -->
        <div class="text-sm p-4 rounded-md bg-[--light-accent-color] text-[--accent-color]">
          <div class="flex whitespace-pre-wrap overflow-x-scroll [&>div]:w-full">
            <format-markdown content="{{ item.status }}"></format-markdown>
          </div>
        </div>
        <div class="flex flex-col gap-2 overflow-hidden">
          <div class="text-sm text-muted-foreground/70">Description:</div>
          <div class="overflow-y-auto h-[30svh] sm:h-[50svh] max-h-[30svh] sm:max-h-[50svh] rounded-md">
            <div class="flex p-4 rounded-md whitespace-pre-wrap bg-accent/50">
              <format-markdown content="{{ item.description | escape }}"></format-markdown>
            </div>
          </div>
        </div>
      </div>
    </div>
    <link-button data-id="00021" data-href="" href="/embed/payment"
      class="bg-[--accent-color] hover:bg-[--dark-accent-color] w-full">
      <span>Select Payment Method</span>
      <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path
          d="m17.707 9.293-5-5a.999.999 0 1 0-1.414 1.414L14.586 9H3a1 1 0 1 0 0 2h11.586l-3.293 3.293a.999.999 0 1 0 1.414 1.414l5-5a1 1 0 0 0 0-1.414"
          fill="currentColor" />
      </svg>
    </link-button>
  </div>
</div>
<script key="embedVariantPage-script">{% raw %}"use strict";(()=>{function withErrorHandling(fn){try{return fn()}catch(e){console.error(e)}}async function getCartData({localCartStorage}){return withErrorHandling(async()=>{let cartResponse=await fetch("/api/getCart",{method:"POST",body:JSON.stringify(localCartStorage)});if(!cartResponse.ok)throw new Error("Failed to fetch cart");return await cartResponse.json()})??{items:[],bundles:[]}}function setLayoutCartCount(cartCount){let cartCountSpan=document.getElementById("cart-count");cartCountSpan&&(cartCountSpan.innerText=cartCount.toString())}function addItemOrBundleToCartObject({params}){let prev={...localCart};return"item"in params?(console.log(prev.items),prev.items.find(item=>item.variant.id===params.item.variant.id)?"Item already in cart":{...prev,items:[...prev.items,{id:params.item.id,quantity:params.item.quantity,coupon:params.item.coupon,addons:params.item.addons,variant:{id:params.item.variant.id},payWhatYouWantAmount:params.item.payWhatYouWantAmount}]}):prev.bundles.find(item=>item.id===params.bundle.id)?"Bundle already in cart":{...prev,bundles:[...prev.bundles,{id:params.bundle.id,quantity:1,coupon:params.bundle.coupon}]}}async function canAddVariantToCart({variantId,quantity}){return withErrorHandling(async()=>{let canAddVariantJson=await(await fetch("/api/canAddVariantToCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({variantId,quantity})})).json();return console.log("canAddVariantJson",canAddVariantJson),Zod.z.object({result:Zod.z.object({success:Zod.z.literal(!0)}).or(Zod.z.object({success:Zod.z.literal(!1),error:Zod.z.string()}))}).parse(canAddVariantJson).result})??{success:!1,error:"Failed to check if variant can be added to cart"}}async function addItemOrBundleToCartObjectWithValidation({params}){if("item"in params){let newCartResult2=addItemOrBundleToCartObject({params});if(typeof newCartResult2=="string")return newCartResult2;let canAddVariantParsed=await canAddVariantToCart({variantId:params.item.variant.id,quantity:params.item.quantity});return canAddVariantParsed.success?newCartResult2:canAddVariantParsed.error}let newCartResult=addItemOrBundleToCartObject({params});if(typeof newCartResult=="string")return newCartResult;let bundleInNewCart=(await getCartData({localCartStorage:newCartResult})).bundles.find(bundle=>bundle.id===params.bundle.id);if(!bundleInNewCart)return"Failed to find bundle in new cart";let variantIdsInBundle=bundleInNewCart.variants.map(variant=>variant.id),errors=(await Promise.all(variantIdsInBundle.map(async variantId=>canAddVariantToCart({variantId,quantity:1})))).filter(response=>!response.success);return errors.length>0?errors.map(error=>"error"in error?error.error:null).filter(v=>v!==null).join(", "):newCartResult}async function entrypoint(stringData){let parsedData=Zod.z.object({variantId:Zod.z.string(),productId:Zod.z.string()}).parse(JSON.parse(stringData)),newLocalCart=addItemOrBundleToCartObject({params:{item:{id:parsedData.productId,variant:{id:parsedData.variantId},quantity:1,coupon:void 0}}});if(typeof newLocalCart=="string"){console.log(newLocalCart);return}setLocalCart(newLocalCart),setLayoutCartCount(newLocalCart.bundles.length+newLocalCart.items.length)}entrypoint(/*!{% endraw %}*/decodeURIComponent(`{
  "variantId": "{{item.variant.id | url_encode}}",
  "productId": "{{item.id | url_encode}}"
  }

`)/*!{% raw %}*/);
})();{% endraw %}</script>